Name: fpc
Version: 0.99.5
Release: 1
ExclusiveArch: i386
Copyright: GPL
Group: Development/Languages
Source: fpc-0.99.5-src.tar.gz
Summary: Free Pascal Compiler
Packager: Peter Vreman (pfv@worldonline.nl)
URL: http://www.brain.uni-freiburg.de/~klaus/fpk-pas/
%description
The Free Pascal Compiler is a Turbo Pascal 7.0 and Delphi II compatible
32bit Pascal Compiler. It comes with fully TP 7.0 compatible run-time library.
Some extensions are added to the language, like function overloading. Shared
libraries can be linked and created.

%define package fpc-%{PACKAGE_VERSION}
%define bindir /usr/bin
%define libdir /usr/lib/fpc
%define vlibdir %{libdir}/%{PACKAGE_VERSION}
%define unitdir %{vlibdir}/linuxunits
%define docdir /usr/doc/%{package}
%define gcclib `dirname \`rpm -ql gcc|grep libgcc.a\``

%prep
%setup -c

%build
make -C rtl/linux all
make -C compiler cycle OPT=-Xs
make -C rtl/utils all OPT=-Xs
make -C docs html

%install
make -C rtl/linux install UNITINSTALLDIR=%{unitdir}
make -C compiler install BININSTALLDIR=%{bindir} LIBINSTALLDIR=%{vlibdir}
make -C rtl/utils install BININSTALLDIR=%{bindir} UNITINSTALLDIR=%{unitdir}
make -C docs install DOCINSTALLDIR=%{docdir}

%clean
make -C rtl/linux clean
make -C compiler clean
make -C rtl/utils clean
make -C docs clean

%post
%{vlibdir}/samplecfg

%files
%{bindir}/ppc386
%{bindir}/dumpppu
%{bindir}/ppumove
%{bindir}/h2pas
%{vlibdir}
%dir %{libdir}
%doc %{docdir}
